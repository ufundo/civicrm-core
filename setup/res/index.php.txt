<?php

// search up the directory tree for a civicrm.standalone.php file
function findStandaloneBootFile() {
  $path = explode(DIRECTORY_SEPARATOR, __DIR__);

  while ($path) {
    $bootFile = implode(DIRECTORY_SEPARATOR, [...$path, 'civicrm.standalone.php']);

    if (file_exists($bootFile)) {
      return $bootFile;
    }
    array_pop($path);
  }

  throw new \Error('Couldn\'t find civicrm.standalone.php in ' . __DIR__ . ' or any of its parent directories');
}

require_once findStandaloneBootFile();

\Civi\Standalone\WebLoader::invokeOrInstall();
